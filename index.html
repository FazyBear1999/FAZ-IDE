<!-- index.html
    FAZ IDE (v0)
    Author: Faz (FazyBear)
    
    Goals:
    - Professional structure: no inline JS/CSS
    - ES modules for clean organization
    - Sandboxed execution + captured console/errors
    -->
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <title>FAZ IDE — Local-First Web IDE for JavaScript, HTML, and CSS</title>
            <meta name="description" content="FAZ IDE is a local-first web IDE with files, sandbox, diagnostics, and lesson workflows for JavaScript, HTML, and CSS." />
            <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
            <meta name="theme-color" content="#0f1117" />
            <link rel="canonical" href="./" />
            <meta property="og:type" content="website" />
            <meta property="og:site_name" content="FAZ IDE" />
            <meta property="og:title" content="FAZ IDE — Local-First Web IDE" />
            <meta property="og:description" content="Local-first JavaScript, HTML, and CSS IDE with sandbox execution, diagnostics, and lesson workflows." />
            <meta property="og:url" content="./" />
            <meta property="og:image" content="./assets/icons/faz-512.png" />
            <meta name="twitter:card" content="summary_large_image" />
            <meta name="twitter:title" content="FAZ IDE — Local-First Web IDE" />
            <meta name="twitter:description" content="Local-first JavaScript, HTML, and CSS IDE with sandbox execution, diagnostics, and lesson workflows." />
            <meta name="twitter:image" content="./assets/icons/faz-512.png" />
            <link rel="manifest" href="./manifest.webmanifest" />
            <link rel="icon" href="./favicon.ico" sizes="any" />
            <link rel="icon" type="image/png" sizes="192x192" href="./assets/icons/faz-192.png" />
            <link rel="icon" type="image/png" sizes="512x512" href="./assets/icons/faz-512.png" />
            <link rel="apple-touch-icon" sizes="192x192" href="./assets/icons/faz-192.png" />
            <link rel="preconnect" href="https://fonts.googleapis.com" />
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500;600&family=Inconsolata:wght@400;500;600&family=JetBrains+Mono:wght@400;500;600&family=Roboto+Mono:wght@400;500;600&family=Source+Code+Pro:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&family=Ubuntu+Mono:wght@400;700&display=swap" />

            <!-- 
                CSS order matters:
                base -> layout -> components -> themes 
            -->
            <link rel="stylesheet" href="./assets/css/base.css" />
            <link rel="stylesheet" href="./assets/css/layout.css" />
            <link rel="stylesheet" href="./assets/css/components.css" />
            <link rel="stylesheet" href="./assets/css/themes.css" />
            <link rel="stylesheet" href="./assets/vendor/codemirror/codemirror.min.css" />
            <link rel="stylesheet" href="./assets/vendor/codemirror/theme/material-darker.min.css" />

            <script src="./assets/vendor/codemirror/codemirror.min.js"></script>
            <script src="./assets/vendor/codemirror/mode/xml/xml.min.js"></script>
            <script src="./assets/vendor/codemirror/mode/css/css.min.js"></script>
            <script src="./assets/vendor/codemirror/mode/javascript/javascript.min.js"></script>
            <script src="./assets/vendor/codemirror/mode/htmlmixed/htmlmixed.min.js"></script>

            <!-- App entry -->
            <script type="module" src="./assets/js/app.js"></script>
        </head>

        <body>
            <section id="tutorialIntro" class="tutorial-intro" hidden aria-hidden="true" aria-live="polite">
                <div id="tutorialIntroHighlight" class="tutorial-intro-highlight" aria-hidden="true" hidden></div>
                <div class="tutorial-intro-backdrop" aria-hidden="true"></div>
                <canvas id="tutorialIntroGalaxy" class="tutorial-intro-galaxy" aria-hidden="true"></canvas>
                <aside class="tutorial-intro-panel" role="dialog" aria-modal="true" aria-labelledby="tutorialIntroTitle">
                    <p class="tutorial-intro-eyebrow">Beginner Tutorial</p>
                    <h2 id="tutorialIntroTitle" class="tutorial-intro-title">Welcome to FAZ IDE</h2>
                    <p id="tutorialIntroBody" class="tutorial-intro-body">We will highlight core IDE sections so you can start quickly.</p>
                    <p id="tutorialIntroProgress" class="tutorial-intro-progress">Step 1 of 1</p>
                    <div class="tutorial-intro-progressbar" aria-hidden="true">
                        <span id="tutorialIntroProgressFill" class="tutorial-intro-progressbar-fill"></span>
                    </div>
                    <div class="tutorial-intro-actions">
                        <button id="tutorialIntroBack" type="button">Back</button>
                        <button id="tutorialIntroNext" type="button">Next</button>
                        <button id="tutorialIntroSkip" type="button">Skip</button>
                    </div>
                </aside>
            </section>
            <div id="appShell" class="app-shell" data-log="open" data-editor="open" data-files="open" data-sandbox="open" data-tools="closed" data-header="open" data-footer="open">
                <div class="wrap">
                    <header class="top strip" aria-label="Top bar">
                        <div class="strip-left">
                            <div class="strip-group" aria-label="Panel toggles">
                                <button id="toggleLog" type="button" data-panel-toggle="true" aria-controls="logPanel" aria-expanded="true">Console</button>
                                <button id="toggleEditor" type="button" data-panel-toggle="true" aria-controls="editorPanel" aria-expanded="true">Editor</button>
                                <button id="toggleFiles" type="button" data-panel-toggle="true" aria-controls="side" aria-expanded="true">Files</button>
                                <button id="toggleSandbox" type="button" data-panel-toggle="true" aria-controls="sandboxPanel" aria-expanded="true">Sandbox</button>
                                <button id="toggleTools" type="button" data-panel-toggle="true" aria-controls="toolsPanel" aria-expanded="false">Tools</button>
                            </div>
                            <div class="strip-group" aria-label="Workspace actions">
                                <button id="layoutToggle" type="button" aria-expanded="false">Layout</button>
                                <button id="toggleHeader" type="button" data-panel-toggle="true">Header</button>
                                <button id="toggleFooter" type="button" data-panel-toggle="true">Footer</button>
                                <button
                                    id="editorShortcutHelpBtn"
                                    type="button"
                                    aria-label="Editor shortcuts"
                                    title="Editor shortcuts: Ctrl/Cmd+Enter Run, Ctrl/Cmd+S Save, Ctrl/Cmd+Shift+S Save all, Ctrl/Cmd+/ Toggle comment, Alt+ArrowUp/Down Move line, Alt+Shift+ArrowDown Duplicate line, Ctrl/Cmd+F Find, Ctrl/Cmd+H Replace, Ctrl/Cmd+Shift+F Project search, Ctrl/Cmd+Shift+O Symbols, Ctrl/Cmd+Plus/Minus Zoom. Press F1 for full list."
                                >
                                    Shortcuts
                                </button>
                                <button id="lessonStatsBtn" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="lessonStatsPanel">Lessons</button>
                                <button id="buyMeCoffeeBtn" type="button" aria-label="Support on Buy Me a Coffee" title="Support on Buy Me a Coffee">Buy me a Byte</button>
                            </div>
                            <div id="themeMenuGroup" class="strip-group strip-theme-group" aria-label="Theme">
                                <label class="sr-only" for="themeSelect">Theme</label>
                                <select id="themeSelect" class="top-theme-select" aria-label="Theme selector">
                                    <option value="dark">Dark</option>
                                    <option value="light">Light</option>
                                    <option value="purple">Purple</option>
                                    <option value="retro">Retro</option>
                                    <option value="temple">Temple</option>
                                </select>
                            </div>
                        </div>

                        <div class="strip-center" aria-label="Command search">
                            <div class="strip-group strip-command-group">
                                <label class="sr-only" for="topCommandPaletteInput">Search commands</label>
                                <input
                                    id="topCommandPaletteInput"
                                    class="top-command-input"
                                    type="search"
                                    placeholder="Search commands (Ctrl/Cmd + Shift + P)"
                                    autocomplete="off"
                                    spellcheck="false"
                                    aria-label="Command palette search"
                                />
                                <div id="topCommandPaletteMenu" class="top-command-dropdown" data-open="false" aria-hidden="true">
                                    <ul id="topCommandPaletteList" class="quick-open-list" role="listbox" aria-label="Header command results"></ul>
                                    <p id="topCommandPaletteHint" class="quick-open-hint">Enter to run • Esc to close</p>
                                </div>
                            </div>
                        </div>

                        <div class="strip-right"></div>
                    </header>

                    <main id="workspace" class="workspace" aria-label="Main content">
                        <div id="workspaceTop" class="workspace-row" data-row="top">
                            <aside id="side" class="card side" aria-label="Files sidebar">
                            <div id="filesPanel" class="files-panel" aria-label="Files">
                                <div class="files-header">
                                    <div class="files-title-row">
                                        <button class="drag-handle" type="button" data-panel="files" aria-label="Drag Files panel">::</button>
                                        <div>
                                            <p class="files-title">FILES</p>
                                        </div>
                                    </div>
                                    <div class="files-actions">
                                        <button id="filesMenuButton" type="button" class="files-menu-btn" aria-haspopup="true" aria-expanded="false" aria-controls="filesMenu">...</button>
                                    </div>
                                </div>
                                <div id="filesToolbar" class="files-toolbar" aria-label="Files toolbar">
                                    <div class="files-search">
                                        <label class="sr-only" for="fileSearch">Filter files</label>
                                        <input id="fileSearch" type="text" placeholder="Filter files" autocomplete="off" />
                                        <button id="fileSearchClear" type="button" aria-label="Clear filter">Clear</button>
                                    </div>
                                    <div class="files-sort">
                                        <label class="sr-only" for="fileSort">Sort files</label>
                                        <select id="fileSort">
                                            <option value="manual">Manual</option>
                                            <option value="name">Name</option>
                                            <option value="recent">Recent</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="filesGames" class="files-games" aria-label="Games library">
                                    <div class="files-games-row">
                                        <button
                                            id="gamesSelectorToggle"
                                            type="button"
                                            class="file-section-toggle files-games-toggle"
                                            data-caret-side="left"
                                            data-files-section-id="games"
                                            draggable="true"
                                            aria-expanded="false"
                                            aria-controls="gamesList"
                                        >
                                            <span class="file-section-caret" aria-hidden="true"></span>
                                            <span class="file-section-label">Games</span>
                                        </button>
                                        <ul id="gamesList" class="files-games-list" role="listbox" aria-label="Available games" aria-hidden="true"></ul>
                                        <button id="gameLoad" type="button" title="Load selected game into editor" hidden>LOAD</button>
                                    </div>
                                </div>
                                <div id="filesApps" class="files-games files-apps" aria-label="Applications library">
                                    <div class="files-games-row files-apps-row">
                                        <button
                                            id="appsSelectorToggle"
                                            type="button"
                                            class="file-section-toggle files-games-toggle files-apps-toggle"
                                            data-caret-side="left"
                                            data-files-section-id="applications"
                                            draggable="true"
                                            aria-expanded="false"
                                            aria-controls="applicationsList"
                                        >
                                            <span class="file-section-caret" aria-hidden="true"></span>
                                            <span class="file-section-label">Applications</span>
                                        </button>
                                        <ul id="applicationsList" class="files-games-list files-apps-list" role="listbox" aria-label="Available applications" aria-hidden="true"></ul>
                                        <button id="appLoad" type="button" title="Load selected application into editor" hidden>LOAD</button>
                                    </div>
                                </div>
                                <div id="filesLessons" class="files-games files-lessons" aria-label="Lessons library">
                                    <div class="files-games-row files-lessons-row">
                                        <button
                                            id="lessonsSelectorToggle"
                                            type="button"
                                            class="file-section-toggle files-games-toggle files-lessons-toggle"
                                            data-caret-side="left"
                                            data-files-section-id="lessons"
                                            draggable="true"
                                            aria-expanded="false"
                                            aria-controls="lessonsList"
                                        >
                                            <span class="file-section-caret" aria-hidden="true"></span>
                                            <span class="file-section-label">Lessons</span>
                                        </button>
                                        <ul id="lessonsList" class="files-games-list files-lessons-list" role="listbox" aria-label="Available lessons" aria-hidden="true"></ul>
                                        <button id="lessonLoad" type="button" title="Load selected lesson into editor" hidden>LOAD</button>
                                    </div>
                                </div>
                                <ul id="fileList" class="file-list" role="listbox" aria-label="Saved files"></ul>
                                <div id="filesMenu" class="files-menu" role="menu" aria-hidden="true">
                                    <section class="files-menu-group" aria-label="File actions">
                                        <p class="files-menu-label">Files</p>
                                        <div class="files-menu-grid files-menu-grid-2">
                                                                                        <button type="button" class="files-menu-item" data-files-menu="new">Create</button>
                                            <button type="button" class="files-menu-item" data-files-menu="new-folder">New Folder</button>
                                            <button type="button" class="files-menu-item" data-files-menu="duplicate">Duplicate</button>
                                            <button type="button" class="files-menu-item" data-files-menu="rename">Rename</button>
                                            <button type="button" class="files-menu-item" data-files-menu="delete-all" data-variant="danger">Delete All</button>
                                            <button type="button" class="files-menu-item" data-files-menu="save-file">Save</button>
                                            <button type="button" class="files-menu-item" data-files-menu="save-all">Save All</button>
                                            <button type="button" class="files-menu-item" data-files-menu="export-workspace">Export</button>
                                            <button type="button" class="files-menu-item" data-files-menu="import-workspace" title="Import workspace JSON or code files (.js, .html, .css, .ts, .md, .txt, etc.)" aria-label="Import workspace JSON or code files">Import</button>
                                        </div>
                                    </section>

                                    <section class="files-menu-group" aria-label="History actions">
                                        <p class="files-menu-label">History</p>
                                        <div class="files-menu-grid files-menu-grid-2">
                                            <button type="button" class="files-menu-item" data-files-menu="undo-action">Undo</button>
                                            <button type="button" class="files-menu-item" data-files-menu="redo-action">Redo</button>
                                        </div>
                                    </section>

                                    <section class="files-menu-group" aria-label="Selection actions">
                                        <p class="files-menu-label">Selection</p>
                                        <div class="files-menu-grid files-menu-grid-3">
                                            <button type="button" class="files-menu-item" data-files-menu="select-all">Select All</button>
                                            <button type="button" class="files-menu-item" data-files-menu="clear-selection">Clear</button>
                                            <button type="button" class="files-menu-item" data-files-menu="trash-selected" data-variant="danger">Trash</button>
                                            <button type="button" class="files-menu-item" data-files-menu="move-selected">Move</button>
                                            <button type="button" class="files-menu-item" data-files-menu="duplicate-selected">Duplicate</button>
                                            <button type="button" class="files-menu-item" data-files-menu="pin-selected">Pin</button>
                                            <button type="button" class="files-menu-item" data-files-menu="unpin-selected">Unpin</button>
                                            <button type="button" class="files-menu-item" data-files-menu="lock-selected">Lock</button>
                                            <button type="button" class="files-menu-item" data-files-menu="unlock-selected">Unlock</button>
                                        </div>
                                    </section>

                                    <section class="files-menu-group" aria-label="Trash actions">
                                        <p class="files-menu-label">Trash</p>
                                        <div class="files-menu-grid files-menu-grid-2">
                                            <button type="button" class="files-menu-item" data-files-menu="undo-delete">Undo</button>
                                            <button type="button" class="files-menu-item" data-files-menu="restore-last">Restore Last</button>
                                            <button type="button" class="files-menu-item" data-files-menu="restore-all">Restore All</button>
                                            <button type="button" class="files-menu-item" data-files-menu="empty-trash" data-variant="danger">Empty</button>
                                        </div>
                                    </section>

                                    <section class="files-menu-group" aria-label="View actions">
                                        <p class="files-menu-label">View</p>
                                        <div class="files-menu-grid files-menu-grid-3">
                                            <button type="button" class="files-menu-item" data-files-toggle="filters" aria-pressed="false">Filters</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="open-editors" aria-pressed="true">Editors</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="files" aria-pressed="true">Files</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="games" aria-pressed="false">Games</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="applications" aria-pressed="false">Apps</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="lessons" aria-pressed="false">Lessons</button>
                                            <button type="button" class="files-menu-item" data-files-toggle="trash" aria-pressed="false">Trash</button>
                                        </div>
                                    </section>
                                </div>
                                <div id="fileRowMenu" class="files-menu" role="menu" aria-hidden="true">
                                    <button type="button" class="files-menu-item" data-file-menu-action="pin">Pin</button>
                                    <button type="button" class="files-menu-item" data-file-menu-action="lock">Lock</button>
                                    <button type="button" class="files-menu-item" data-file-menu-action="rename">Rename</button>
                                    <button type="button" class="files-menu-item" data-file-menu-action="duplicate">Duplicate</button>
                                    <button type="button" class="files-menu-item" data-file-menu-action="delete" data-variant="danger">Delete</button>
                                </div>
                                <div id="fileFolderMenu" class="files-menu" role="menu" aria-hidden="true">
                                    <button type="button" class="files-menu-item" data-folder-menu-action="rename">Rename Folder</button>
                                    <button type="button" class="files-menu-item" data-folder-menu-action="new-file">New File Here</button>
                                    <button type="button" class="files-menu-item" data-folder-menu-action="new-folder">New Folder Here</button>
                                    <button type="button" class="files-menu-item" data-folder-menu-action="delete" data-variant="danger">Delete Folder</button>
                                    <button type="button" class="files-menu-item" data-folder-menu-action="collapse-all">Collapse All</button>
                                    <button type="button" class="files-menu-item" data-folder-menu-action="expand-all">Expand All</button>
                                </div>
                                <input id="workspaceImportInput" class="sr-only" type="file" multiple accept=".json,application/json,.js,.mjs,.cjs,.jsx,.ts,.tsx,.html,.htm,.css,.scss,.sass,.less,.md,.markdown,.txt,.svg,.xml,text/plain,text/html,text/css" aria-label="Import workspace or code files" />
                            </div>
                            </aside>

                            <div id="splitFiles" class="splitter splitter-vertical" role="separator" aria-orientation="vertical" aria-label="Resize files panel" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" data-resize="files"></div>

                            <!-- Editor Panel -->
                            <section id="editorPanel" class="card editor-panel" aria-label="Editor panel">
                            <div class="card-hd">
                                <div class="editor-header" aria-label="Editor header">
                                    <button class="drag-handle" type="button" data-panel="editor" aria-label="Drag Editor panel">::</button>
                                    <h2 class="editor-title">Editor</h2>
                                    <div class="editor-buttons" aria-label="Editor buttons">
                                        <button class="primary" id="run" type="button" title="Run code in sandbox">Run</button>
                                        <button class="danger" id="clear" type="button" title="Clear editor contents">Clear</button>
                                        <button id="format" type="button" title="Format active file">Format</button>
                                        <button class="danger" id="stop" type="button" title="Stop sandbox run">Stop</button>
                                        <div id="lessonHeaderHud" class="lesson-header-hud" data-active="false" aria-hidden="true" aria-label="Lesson level and XP" hidden>
                                            <span id="lessonHudLevel" class="lesson-header-chip">Lv 1</span>
                                            <span id="lessonHudXp" class="lesson-header-chip">XP 0</span>
                                            <span id="lessonHudCoins" class="lesson-header-chip">Bytes 0</span>
                                        </div>
                                    </div>
                                    <div class="editor-pro-buttons" aria-label="Editor tools">
                                        <button id="editorFindBtn" type="button" title="Find and replace">Find</button>
                                        <button id="editorSymbolsBtn" type="button" title="Outline and symbols">Symbols</button>
                                        <button id="projectSearchBtn" type="button" title="Search across files">Project</button>
                                        <button id="editorSplitBtn" type="button" title="Split compare view">Split</button>
                                        <button id="editorHistoryBtn" type="button" title="Local code history">History</button>
                                        <button id="editorSettingsBtn" type="button" title="Editor settings">Settings</button>
                                    </div>
                                </div>
                            </div>

                            <div class="card-bd" aria-label="Code workspace">
                                <div class="editor-tabs" aria-label="Open files">
                                    <div id="editorTabs" class="editor-tabs-list" role="tablist"></div>
                                </div>
                                <div id="editorScopeBar" class="editor-scope-bar" data-visible="false" aria-live="polite" aria-label="Editor scope breadcrumb">
                                    <span class="editor-scope-label">Scope</span>
                                    <div id="editorScopeTrail" class="editor-scope-trail" role="navigation" aria-label="Current editor scope"></div>
                                </div>
                                <div class="editor-pane">
                                    <div id="lessonHud" class="lesson-hud" data-active="false" aria-live="polite" aria-label="Lesson progress" hidden>
                                        <div class="lesson-hud-rail lesson-hud-rail-vertical" aria-hidden="true">
                                            <span id="lessonHudFill" class="lesson-hud-fill"></span>
                                        </div>
                                        <span id="lessonHudPace" class="lesson-hud-legacy" hidden>WPM 0</span>
                                        <span id="lessonHudProgress" class="lesson-hud-legacy" hidden>Progress 0%</span>
                                        <span id="lessonHudStreak" class="lesson-hud-legacy" hidden>Streak 0</span>
                                        <span id="lessonHudStreakFill" class="lesson-hud-legacy" hidden></span>
                                        <span id="lessonHudStep" class="lesson-hud-legacy" hidden>Lesson</span>
                                        <div id="lessonHudMood" class="lesson-hud-legacy" aria-hidden="true" hidden></div>
                                        <div id="lessonHudBurst" class="lesson-hud-legacy" aria-hidden="true" hidden></div>
                                    </div>
                                    <textarea id="editor" spellcheck="false" aria-label="Code editor"></textarea>
                                    <pre id="editorMirror" class="editor-mirror" aria-label="Saved version preview"></pre>
                                    <div id="editorSignatureHint" class="editor-signature-hint" data-visible="false" aria-hidden="true" aria-live="polite"></div>
                                    <div id="editorCompletion" class="editor-completion" aria-hidden="true">
                                        <ul id="editorCompletionList" class="editor-completion-list" role="listbox" aria-label="Editor completions"></ul>
                                    </div>
                                </div>
                            </div>
                            </section>

                            <div id="splitSandbox" class="splitter splitter-vertical" role="separator" aria-orientation="vertical" aria-label="Resize sandbox panel" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" data-resize="sandbox"></div>

                            <!-- Sandbox Panel -->
                            <section id="sandboxPanel" class="card sandbox-panel" aria-label="Sandbox panel">
                                <div class="card-hd">
                                    <div class="card-title">
                                        <div class="title-row">
                                            <button class="drag-handle" type="button" data-panel="sandbox" aria-label="Drag Sandbox panel">::</button>
                                            <h2>Sandbox</h2>
                                        </div>
                                    </div>
                                </div>

                                <div class="card-bd">
                                    <div class="sandbox-layout">
                                    <div class="sandbox-main">
                                        <div id="runnerShell" class="runner-shell" data-fullscreen="false">
                                            <div class="runner-actions">
                                                <button id="popoutSandbox" type="button">Pop out</button>
                                                <button id="runnerFull" type="button">Expand</button>
                                                <button id="runnerExit" class="runner-exit" type="button" aria-label="Exit fullscreen">
                                                    X
                                                </button>
                                            </div>
                                            <iframe
                                                id="runner"
                                                class="runner"
                                                sandbox="allow-scripts"
                                                title="FAZ IDE sandbox runner"
                                            ></iframe>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </section>

                            <div id="splitTools" class="splitter splitter-vertical" role="separator" aria-orientation="vertical" aria-label="Resize tools panel" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" data-resize="tools"></div>

                            <section id="toolsPanel" class="card tools-panel" aria-label="Tools panel">
                                <div class="card-hd">
                                    <div class="card-title">
                                        <div class="title-row">
                                            <button class="drag-handle" type="button" data-panel="tools" aria-label="Drag Tools panel">::</button>
                                            <h2>Tools</h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-bd">
                                    <div id="toolsTabs" class="tools-tabs" role="tablist" aria-label="Tools tabs">
                                        <button id="toolsTabTaskRunner" class="tools-tab" type="button" role="tab" data-tools-tab="task-runner" aria-controls="taskRunnerPanel" aria-selected="true" tabindex="0">Task Runner</button>
                                        <button id="toolsTabDiagnostics" class="tools-tab" type="button" role="tab" data-tools-tab="diagnostics" aria-controls="diagnosticsPanel" aria-selected="false" tabindex="-1">Diagnostics</button>
                                        <button id="toolsTabInspector" class="tools-tab" type="button" role="tab" data-tools-tab="inspect" aria-controls="inspectPanel" aria-selected="false" tabindex="-1">Inspector</button>
                                        <button id="toolsTabDebugger" class="tools-tab" type="button" role="tab" data-tools-tab="debug" aria-controls="debugPanel" aria-selected="false" tabindex="-1">Debugger</button>
                                    </div>

                                    <div class="tools-tab-panels">
                                    <section id="taskRunnerPanel" class="diagnostics-panel task-runner-panel" aria-live="polite" role="tabpanel" data-tools-panel="task-runner" data-open="true">
                                        <header class="diagnostics-header">
                                            <div>
                                                <p class="diagnostics-label">Task Runner</p>
                                                <p class="diagnostics-sub">Run workspace tasks and inspect output</p>
                                            </div>
                                            <div class="diagnostics-actions">
                                                <span id="taskRunnerStatus" class="task-runner-status" data-state="idle">Idle</span>
                                                <button id="taskRunnerClear" type="button">Clear</button>
                                            </div>
                                        </header>
                                        <div class="task-runner-actions" role="group" aria-label="Task runner actions">
                                            <button id="taskRunAll" type="button">Run All</button>
                                            <button id="taskRunApp" type="button">Run App</button>
                                            <button id="taskRunLint" type="button">Lint Workspace</button>
                                            <button id="taskRunFormat" type="button">Format Active</button>
                                            <button id="taskRunSaveAll" type="button">Save All</button>
                                        </div>
                                        <ul id="taskRunnerOutput" class="diagnostics-list task-runner-output" role="list"></ul>
                                    </section>

                                    <section id="diagnosticsPanel" class="diagnostics-panel" aria-live="polite" role="tabpanel" data-tools-panel="diagnostics" data-open="false" hidden>
                                        <header class="diagnostics-header">
                                            <div>
                                                <p class="diagnostics-label">Diagnostics</p>
                                                <p class="diagnostics-sub">Storage & clipboard events</p>
                                            </div>
                                            <div class="diagnostics-actions">
                                                <button id="toggleDiagnostics" type="button" aria-pressed="false">Verbose: Off</button>
                                                <button id="clearDiagnostics" type="button">Clear</button>
                                            </div>
                                        </header>
                                        <ul id="diagnosticsList" class="diagnostics-list" role="list"></ul>
                                    </section>

                                    <section id="inspectPanel" class="inspect-panel" aria-live="polite" role="tabpanel" data-tools-panel="inspect" data-open="false" hidden>
                                        <header class="inspect-header">
                                            <div>
                                                <p class="inspect-label">Inspect</p>
                                                <p class="inspect-sub">Hover elements inside the sandbox</p>
                                            </div>
                                            <div class="inspect-actions">
                                                <button id="inspect" type="button">Inspect</button>
                                                <button id="inspectCopy" type="button">Copy Selector</button>
                                                <span id="inspectStatus" class="inspect-status">Off</span>
                                            </div>
                                        </header>
                                        <div id="inspectDetails" class="inspect-details">
                                            <p>Run code, then toggle Inspect to explore the sandbox DOM.</p>
                                        </div>
                                    </section>

                                    <section id="debugPanel" class="diagnostics-panel debug-panel" aria-live="polite" role="tabpanel" data-tools-panel="debug" data-open="false" hidden>
                                        <header class="diagnostics-header">
                                            <div>
                                                <p class="diagnostics-label">Debugger</p>
                                                <p class="diagnostics-sub">Breakpoints and watch expressions</p>
                                            </div>
                                            <div class="diagnostics-actions">
                                                <button id="debugModeToggle" type="button" aria-pressed="false">Debug: Off</button>
                                                <button id="debugRun" type="button">Run Debug</button>
                                                <button id="debugClearBreakpoints" type="button">Clear BP</button>
                                                <button id="debugClearWatches" type="button">Clear Watches</button>
                                            </div>
                                        </header>
                                        <ul id="debugBreakpointList" class="diagnostics-list" role="list"></ul>
                                        <div class="debug-watch-row">
                                            <label class="sr-only" for="debugWatchInput">Watch expression</label>
                                            <input id="debugWatchInput" type="text" placeholder="Watch expression (e.g. playerHP)" />
                                            <button id="debugWatchAdd" type="button">Add Watch</button>
                                        </div>
                                        <ul id="debugWatchList" class="diagnostics-list" role="list"></ul>
                                    </section>
                                    </div>

                                    <div id="toolsProblemsDock" class="tools-problems-dock" data-open="true">
                                        <button id="toolsProblemsToggle" class="tools-problems-toggle" type="button" aria-controls="problemsPanel" aria-expanded="true">Hide Problems</button>
                                        <section id="problemsPanel" class="diagnostics-panel problems-panel" aria-live="polite" data-open="true" aria-hidden="false">
                                            <header class="diagnostics-header">
                                                <div>
                                                    <p class="diagnostics-label">Problems</p>
                                                    <p class="diagnostics-sub">Lint and runtime issues</p>
                                                </div>
                                                <div class="diagnostics-actions">
                                                    <button id="problemsRefresh" type="button">Refresh</button>
                                                    <button id="problemsClear" type="button">Clear</button>
                                                </div>
                                            </header>
                                            <ul id="problemsList" class="diagnostics-list problems-list" role="list"></ul>
                                        </section>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <div id="splitRow" class="splitter splitter-horizontal" role="separator" aria-orientation="horizontal" aria-label="Resize bottom dock" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" data-resize="row"></div>
                        <div id="workspaceBottom" class="workspace-row" data-row="bottom">
                            <!-- Log Panel -->
                            <section id="logPanel" class="card log-panel" aria-label="Console log">
                            <div class="card-hd">
                                <div class="card-title">
                                    <div class="title-row">
                                        <button class="drag-handle" type="button" data-panel="log" aria-label="Drag Console panel">::</button>
                                        <h2>Console</h2>
                                    </div>
                                </div>

                                <div class="row" aria-label="Console actions">
                                    <button id="copyLog" type="button" class="console-tab">Copy</button>
                                    <button id="clearLog" type="button" class="console-tab">Clear</button>
                                </div>
                            </div>
                            <div class="card-bd" aria-label="Console output">
                                <pre id="log" class="log" aria-live="polite"></pre>
                            </div>
                            </section>

                            <div id="splitLog" class="splitter splitter-vertical" role="separator" aria-orientation="vertical" aria-label="Resize console panel" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" data-resize="log"></div>
                        </div>
                    </main>

                    <footer class="foot" aria-label="Footer">
                        <div id="footerStatus" class="status" aria-label="Status">
                            <span class="dot" aria-hidden="true"></span>
                            <span id="statusText">Ready</span>
                        </div>
                        <span id="footerEditorStatus" class="foot-editor-status" aria-label="Editor footer status">
                            <span id="footerPrivacy" title="Workspace data stays in your browser only">Privacy: Local only</span>
                            <span id="footerEditorFile">File Name: -</span>
                            <span id="footerEditorLang">Lang: Text</span>
                            <span id="footerEditorDirty" data-dirty="false">Saved</span>
                            <span id="footerEditorCursor">Ln 1, Col 1</span>
                            <span id="footerEditorSelection">Sel 0</span>
                            <span id="footerEditorChars">Chars 0</span>
                        </span>
                        <span id="footerRuntimeStatus" class="foot-runtime-status" aria-label="Runtime footer status">
                            <span id="footerEditorRuntime">Editor: Ready</span>
                            <span id="footerSandbox">Sandbox: Idle</span>
                            <span id="footerProblems">Problems: 0</span>
                            <span id="footerStorage">Storage: OK</span>
                            <span id="footerZoom" data-state="ok">Zoom: 100%</span>
                        </span>
                    </footer>
                </div>
            </div>
            <div id="dockOverlay" class="dock-overlay" aria-hidden="true">
                <button class="dock-zone dock-left" type="button" data-dock-zone="left" aria-label="Dock left" title="LEFT">LEFT</button>
                <button class="dock-zone dock-right" type="button" data-dock-zone="right" aria-label="Dock right" title="RIGHT">RIGHT</button>
                <button class="dock-zone dock-bottom" type="button" data-dock-zone="bottom" aria-label="Dock bottom" title="BOTTOM">BOTTOM</button>
                <button class="dock-zone dock-center" type="button" data-dock-zone="center" aria-label="Reset dock position (center)" title="CENTER (RESET)">CENTER (RESET)</button>
            </div>
            <div id="quickOpenBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section id="quickOpenPalette" class="quick-open" data-open="false" aria-hidden="true" aria-label="Quick open files">
                <div class="quick-open-head">
                    <p class="quick-open-title">Quick Open</p>
                    <p class="quick-open-sub">Type to find files</p>
                </div>
                <label class="sr-only" for="quickOpenInput">Search files</label>
                <input id="quickOpenInput" type="text" placeholder="Search files..." autocomplete="off" spellcheck="false" />
                <ul id="quickOpenList" class="quick-open-list" role="listbox" aria-label="Quick open results"></ul>
                <p id="quickOpenHint" class="quick-open-hint">Enter to open • Esc to close</p>
            </section>

            <div id="commandPaletteBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section id="commandPalette" class="quick-open command-palette" data-open="false" aria-hidden="true" aria-label="Command palette">
                <div class="quick-open-head">
                    <p class="quick-open-title">Command Palette</p>
                    <p class="quick-open-sub">Run any action</p>
                </div>
                <label class="sr-only" for="commandPaletteInput">Search commands</label>
                <input id="commandPaletteInput" type="text" placeholder="Type a command..." autocomplete="off" spellcheck="false" />
                <ul id="commandPaletteList" class="quick-open-list" role="listbox" aria-label="Command results"></ul>
                <p id="commandPaletteHint" class="quick-open-hint">Enter to run • Esc to close</p>
            </section>

            <div id="editorSearchBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section id="editorSearchPanel" class="quick-open editor-search-panel" data-open="false" aria-hidden="true" aria-label="Find and replace">
                <div class="quick-open-head">
                    <p class="quick-open-title">Find and Replace</p>
                    <p class="quick-open-sub">Regex, case, whole word and multi-cursor safe replace</p>
                </div>
                <div class="editor-search-grid">
                    <label class="sr-only" for="editorFindInput">Find text</label>
                    <input id="editorFindInput" type="text" placeholder="Find..." autocomplete="off" spellcheck="false" />
                    <label class="sr-only" for="editorReplaceInput">Replace with</label>
                    <input id="editorReplaceInput" type="text" placeholder="Replace with..." autocomplete="off" spellcheck="false" />
                </div>
                <div class="editor-search-controls" role="group" aria-label="Find options">
                    <button id="editorFindCase" type="button" aria-pressed="false">Aa</button>
                    <button id="editorFindWord" type="button" aria-pressed="false">Word</button>
                    <button id="editorFindRegex" type="button" aria-pressed="false">.*</button>
                    <button id="editorFindSelection" type="button" aria-pressed="false">Selection</button>
                    <button id="editorFindPrev" type="button">Prev</button>
                    <button id="editorFindNext" type="button" class="primary">Next</button>
                    <button id="editorReplaceOne" type="button">Replace</button>
                    <button id="editorReplaceAll" type="button">Replace All</button>
                </div>
                <p id="editorFindStatus" class="quick-open-hint">Type to search the active file.</p>
            </section>

            <div id="symbolPaletteBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section id="symbolPalette" class="quick-open symbol-palette" data-open="false" aria-hidden="true" aria-label="Symbols">
                <div class="quick-open-head">
                    <p class="quick-open-title">Symbols</p>
                    <p class="quick-open-sub">Outline, go to symbol, rename, and find references</p>
                </div>
                <div class="editor-search-grid">
                    <label class="sr-only" for="symbolSearchInput">Search symbols</label>
                    <input id="symbolSearchInput" type="text" placeholder="Filter symbols..." autocomplete="off" spellcheck="false" />
                </div>
                <ul id="symbolList" class="quick-open-list" role="listbox" aria-label="Symbols list"></ul>
                <div class="editor-search-controls" role="group" aria-label="Symbol actions">
                    <button id="symbolGoLine" type="button">Go to Line</button>
                    <button id="symbolRename" type="button">Rename Symbol</button>
                    <button id="symbolFindRefs" type="button">Find Refs</button>
                </div>
                <ul id="symbolRefsList" class="quick-open-list symbol-refs-list" role="listbox" aria-label="Symbol references"></ul>
                <p id="symbolHint" class="quick-open-hint">Enter to jump • Ctrl/Cmd+G for line</p>
            </section>

            <div id="projectSearchBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section id="projectSearchPanel" class="quick-open project-search-panel" data-open="false" aria-hidden="true" aria-label="Project search and replace">
                <div class="quick-open-head">
                    <p class="quick-open-title">Project Search</p>
                    <p class="quick-open-sub">Search and replace across workspace files</p>
                </div>
                <div class="editor-search-grid">
                    <label class="sr-only" for="projectSearchInput">Search project text</label>
                    <input id="projectSearchInput" type="text" placeholder="Search in files..." autocomplete="off" spellcheck="false" />
                    <label class="sr-only" for="projectReplaceInput">Replace project text</label>
                    <input id="projectReplaceInput" type="text" placeholder="Replace with..." autocomplete="off" spellcheck="false" />
                </div>
                <div class="editor-search-controls" role="group" aria-label="Project search options">
                    <button id="projectSearchCase" type="button" aria-pressed="false">Aa</button>
                    <button id="projectSearchWord" type="button" aria-pressed="false">Word</button>
                    <button id="projectSearchRegex" type="button" aria-pressed="false">.*</button>
                    <button id="projectSearchRun" type="button" class="primary">Scan</button>
                    <button id="projectSearchSelectAll" type="button">Select All</button>
                    <button id="projectSearchClearSel" type="button">Clear Selection</button>
                    <button id="projectReplaceSelected" type="button">Replace Selected</button>
                </div>
                <ul id="projectSearchList" class="quick-open-list" role="listbox" aria-label="Project search results"></ul>
                <p id="projectSearchHint" class="quick-open-hint">Scan to search all files. Esc to close.</p>
            </section>

            <div id="editorHistoryBackdrop" class="layout-backdrop" aria-hidden="true"></div>
            <section id="editorHistoryPanel" class="layout-panel editor-history-panel" data-open="false" aria-hidden="true" aria-label="Editor history">
                <header class="layout-header">
                    <div>
                        <p class="layout-title">Editor History</p>
                        <p class="layout-sub">Local checkpoints for the active file</p>
                    </div>
                    <button id="editorHistoryClose" type="button">Close</button>
                </header>
                <div class="layout-body">
                    <div class="editor-history-actions">
                        <button id="editorHistorySnapshot" type="button">Snapshot Now</button>
                        <button id="editorHistoryRestore" type="button">Restore Selected</button>
                        <button id="editorHistoryClear" type="button" class="danger">Clear File History</button>
                    </div>
                    <ul id="editorHistoryList" class="editor-history-list" role="list"></ul>
                    <pre id="editorHistoryDiff" class="editor-history-diff" aria-live="polite"></pre>
                </div>
            </section>

            <div id="editorSettingsBackdrop" class="layout-backdrop" aria-hidden="true"></div>
            <section id="editorSettingsPanel" class="layout-panel editor-settings-panel" data-open="false" aria-hidden="true" aria-label="Editor settings">
                <header class="layout-header">
                    <div>
                        <p class="layout-title">Editor Settings</p>
                        <p class="layout-sub">Profiles, formatting, and typing behavior</p>
                    </div>
                    <button id="editorSettingsClose" type="button">Close</button>
                </header>
                <div class="layout-body">
                    <div class="layout-group">
                        <label class="layout-label" for="editorProfileSelect">Profile</label>
                        <select id="editorProfileSelect" class="layout-select">
                            <option value="balanced">Balanced</option>
                            <option value="focus">Focus</option>
                            <option value="presentation">Presentation</option>
                        </select>
                    </div>
                    <div class="layout-group">
                        <label class="layout-label" for="editorFormatterSelect">Formatter</label>
                        <select id="editorFormatterSelect" class="layout-select">
                            <option value="auto">Auto (Prettier fallback)</option>
                            <option value="prettier">Prettier only</option>
                            <option value="basic">Basic formatter only</option>
                        </select>
                    </div>
                    <div class="layout-group editor-settings-number-group">
                        <label class="layout-label" for="editorTabSize">Tab size</label>
                        <input id="editorTabSize" type="number" min="2" max="8" step="1" />
                    </div>
                    <div class="layout-group editor-settings-number-group">
                        <label class="layout-label" for="editorFontSize">Font size</label>
                        <input id="editorFontSize" type="number" min="11" max="22" step="1" />
                    </div>
                    <div class="layout-group">
                        <label class="layout-label" for="editorFontFamilySelect">Font family</label>
                        <select id="editorFontFamilySelect" class="layout-select">
                            <option value="default">System Mono (Safe Default)</option>
                            <option value="jetbrains-mono">JetBrains Mono</option>
                            <option value="fira-code">Fira Code</option>
                            <option value="source-code-pro">Source Code Pro</option>
                            <option value="ibm-plex-mono">IBM Plex Mono</option>
                            <option value="roboto-mono">Roboto Mono</option>
                            <option value="inconsolata">Inconsolata</option>
                            <option value="ubuntu-mono">Ubuntu Mono</option>
                            <option value="cascadia-mono">Cascadia Mono</option>
                            <option value="space-mono">Space Mono</option>
                        </select>
                    </div>
                    <div class="layout-group">
                        <label class="layout-label" for="editorSyntaxThemeSelect">Syntax colors</label>
                        <select id="editorSyntaxThemeSelect" class="layout-select">
                            <option value="default">Syntax Default</option>
                            <option value="volcanic">Volcanic Core (Orange + Dark Purple)</option>
                            <option value="twilight">Twilight Pulse</option>
                            <option value="aurora">Aurora Mint</option>
                            <option value="solarflare">Solar Flare</option>
                            <option value="deepsea">Deep Sea</option>
                            <option value="nebula">Nebula Bloom</option>
                            <option value="forge">Forge Ember</option>
                            <option value="lotus">Lotus Night</option>
                            <option value="embermint">Ember Mint</option>
                            <option value="arctic">Arctic Signal</option>
                            <option value="obsidian">Obsidian Glow</option>
                            <option value="sunset">Sunset Copper</option>
                            <option value="verdant">Verdant Code</option>
                            <option value="royal">Royal Indigo</option>
                            <option value="candy">Candy Neon</option>
                            <option value="magma">Magma Core</option>
                            <option value="glacier">Glacier Blue</option>
                            <option value="storm">Storm Circuit</option>
                            <option value="orchid">Orchid Mist</option>
                            <option value="graphene">Graphene Mono</option>
                            <option value="retro">Retro</option>
                            <option value="temple">Temple</option>
                        </select>
                    </div>
                    <div class="layout-group editor-settings-number-group">
                        <label class="layout-label" for="editorAutoSaveMs">Autosave delay (ms)</label>
                        <input id="editorAutoSaveMs" type="number" min="100" max="5000" step="100" />
                    </div>
                    <div class="layout-group">
                        <label class="layout-toggle">
                            <input id="editorWrapToggle" type="checkbox" />
                            <span>Line wrap</span>
                        </label>
                    </div>
                    <div class="layout-group">
                        <label class="layout-toggle">
                            <input id="editorLintToggle" type="checkbox" />
                            <span>Inline diagnostics</span>
                        </label>
                    </div>
                    <div class="layout-group">
                        <label class="layout-toggle">
                            <input id="editorErrorLensToggle" type="checkbox" />
                            <span>Error lens</span>
                        </label>
                    </div>
                    <div class="layout-group">
                        <label class="layout-toggle">
                            <input id="editorSnippetToggle" type="checkbox" />
                            <span>Tab snippets</span>
                        </label>
                    </div>
                    <div class="layout-group">
                        <label class="layout-toggle">
                            <input id="editorSignatureHintToggle" type="checkbox" />
                            <span>Inline parameter hints</span>
                        </label>
                    </div>
                    <div class="layout-group editor-settings-number-group">
                        <label class="layout-label" for="editorCompletionMaxItems">Completion max items</label>
                        <input id="editorCompletionMaxItems" type="number" min="4" max="16" step="1" />
                    </div>
                    <div class="layout-group editor-settings-number-group">
                        <label class="layout-label" for="editorCompletionOpacity">Completion transparency (%)</label>
                        <input id="editorCompletionOpacity" type="number" min="20" max="100" step="5" />
                    </div>
                    <div class="layout-group snippet-manager-group">
                        <p class="layout-label">Snippet Manager</p>
                        <div class="snippet-manager-grid">
                            <input id="snippetTriggerInput" type="text" placeholder="Trigger (ex: clg)" autocomplete="off" spellcheck="false" />
                            <select id="snippetScopeSelect" class="layout-select">
                                <option value="*">All files</option>
                                <option value="javascript">JavaScript</option>
                                <option value="typescript">TypeScript</option>
                                <option value="json">JSON</option>
                                <option value="html">HTML</option>
                                <option value="css">CSS</option>
                                <option value="markdown">Markdown</option>
                                <option value="text">Text</option>
                            </select>
                            <button id="snippetAdd" type="button">Add / Update</button>
                        </div>
                        <textarea id="snippetTemplateInput" rows="3" placeholder="Snippet template (supports ${1:placeholder} and ${0})" spellcheck="false"></textarea>
                        <ul id="snippetList" class="snippet-list" role="list"></ul>
                    </div>
                </div>
            </section>

            <div id="shortcutHelpBackdrop" class="layout-backdrop" aria-hidden="true"></div>
            <section id="shortcutHelpPanel" class="layout-panel shortcut-help-panel" data-open="false" aria-hidden="true" aria-label="Keyboard shortcuts">
                <header class="layout-header">
                    <div>
                        <p class="layout-title">Keyboard Shortcuts</p>
                        <p class="layout-sub">File system and workflow</p>
                    </div>
                    <button id="shortcutHelpClose" type="button">Close</button>
                </header>
                <div class="layout-body">
                    <div class="layout-group">
                        <p class="files-menu-label">Core</p>
                        <ul class="shortcut-help-list" role="list">
                            <li><span>Open this panel</span><kbd>F1</kbd></li>
                            <li><span>Close open panel/modal</span><kbd>Esc</kbd></li>
                            <li><span>Run code</span><kbd>Ctrl/Cmd + Enter</kbd></li>
                            <li><span>Save file</span><kbd>Ctrl/Cmd + S</kbd></li>
                            <li><span>Save all</span><kbd>Ctrl/Cmd + Shift + S</kbd></li>
                            <li><span>New file</span><kbd>Ctrl/Cmd + N</kbd></li>
                            <li><span>Quick open files</span><kbd>Ctrl/Cmd + P</kbd></li>
                            <li><span>Command palette</span><kbd>Ctrl/Cmd + Shift + P</kbd></li>
                            <li><span>Zoom in</span><kbd>Ctrl/Cmd + +</kbd></li>
                            <li><span>Zoom out</span><kbd>Ctrl/Cmd + -</kbd></li>
                            <li><span>Reset zoom</span><kbd>Ctrl/Cmd + 0</kbd></li>
                        </ul>
                    </div>
                    <div class="layout-group">
                        <p class="files-menu-label">Editor Pro</p>
                        <ul class="shortcut-help-list" role="list">
                            <li><span>Find</span><kbd>Ctrl/Cmd + F</kbd></li>
                            <li><span>Replace</span><kbd>Ctrl/Cmd + H</kbd></li>
                            <li><span>Toggle line comment</span><kbd>Ctrl/Cmd + /</kbd></li>
                            <li><span>Move line down</span><kbd>Alt + ArrowDown</kbd></li>
                            <li><span>Move line up</span><kbd>Alt + ArrowUp</kbd></li>
                            <li><span>Duplicate line down</span><kbd>Alt + Shift + ArrowDown</kbd></li>
                            <li><span>Duplicate line up</span><kbd>Alt + Shift + ArrowUp</kbd></li>
                            <li><span>Delete line/block</span><kbd>Ctrl/Cmd + Shift + K</kbd></li>
                            <li><span>Select next occurrence</span><kbd>Ctrl/Cmd + D</kbd></li>
                            <li><span>Project search</span><kbd>Ctrl/Cmd + Shift + F</kbd></li>
                            <li><span>Go to line</span><kbd>Ctrl/Cmd + G</kbd></li>
                            <li><span>Symbols</span><kbd>Ctrl/Cmd + Shift + O</kbd></li>
                            <li><span>Add cursor down</span><kbd>Ctrl/Cmd + Alt + ArrowDown</kbd></li>
                            <li><span>Add cursor up</span><kbd>Ctrl/Cmd + Alt + ArrowUp</kbd></li>
                            <li><span>Clear console (editor focus)</span><kbd>Ctrl/Cmd + L</kbd></li>
                            <li><span>Expand snippet</span><kbd>Tab</kbd></li>
                        </ul>
                    </div>
                    <div class="layout-group">
                        <p class="files-menu-label">File Ops</p>
                        <ul class="shortcut-help-list" role="list">
                            <li><span>Undo file action</span><kbd>Ctrl/Cmd + Z</kbd></li>
                            <li><span>Redo file action</span><kbd>Ctrl/Cmd + Shift + Z</kbd></li>
                            <li><span>Redo (alt)</span><kbd>Ctrl/Cmd + Y</kbd></li>
                            <li><span>Select all files (Files panel focus)</span><kbd>Ctrl/Cmd + A</kbd></li>
                            <li><span>Duplicate file/selection (Files panel focus)</span><kbd>Ctrl/Cmd + D</kbd></li>
                            <li><span>Rename file (Files panel focus)</span><kbd>F2</kbd></li>
                            <li><span>Trash file/selection (Files panel focus)</span><kbd>Delete</kbd></li>
                            <li><span>Open file menu (Files panel focus)</span><kbd>Shift + F10</kbd></li>
                        </ul>
                    </div>
                </div>
            </section>

            <div id="lessonStatsBackdrop" class="layout-backdrop" aria-hidden="true"></div>
            <section id="lessonStatsPanel" class="layout-panel lesson-stats-panel" data-open="false" aria-hidden="true" aria-label="Lessons" role="dialog" aria-modal="true">
                <header class="layout-header">
                    <div>
                        <p class="layout-title">Lessons</p>
                        <p class="layout-sub">Progress, live stats, and theme shop</p>
                    </div>
                    <button id="lessonStatsClose" type="button">Close</button>
                </header>
                <div class="layout-body lesson-stats-body" id="lessonHeaderStats" aria-live="polite" aria-label="Lesson stats summary">
                    <div class="lesson-stats-tabs" role="group" aria-label="Lessons panel views">
                        <button id="lessonStatsOverviewTab" type="button" class="lesson-stats-tab" data-active="true" aria-pressed="true">Overview</button>
                        <button id="lessonStatsShopTab" type="button" class="lesson-stats-tab" data-active="false" aria-pressed="false">Shop</button>
                    </div>

                    <div id="lessonStatsOverview" class="lesson-stats-view" aria-hidden="false">
                        <div class="lesson-stats-hero">
                            <p id="lessonStatsHeroTitle" class="lesson-stats-hero-title">Code Cadet</p>
                            <p id="lessonStatsHeroSubtitle" class="lesson-stats-hero-sub">Build rhythm with clean, steady reps.</p>
                            <div class="lesson-stats-next" aria-label="Progress to next level">
                                <span id="lessonStatsNextLabel" class="lesson-stats-next-label">Next level in 250 XP</span>
                                <div class="lesson-stats-next-rail" aria-hidden="true">
                                    <span id="lessonStatsNextFill" class="lesson-stats-next-fill"></span>
                                </div>
                            </div>
                        </div>

                        <div class="lesson-stats-grid" role="list">
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Level</span><strong id="lessonHeaderLevel">Lv 1</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">XP</span><strong id="lessonHeaderXp">XP 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Bytes</span><strong id="lessonHeaderCoins">Bytes 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Lessons</span><strong id="lessonHeaderCompleted">Done 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Best Streak</span><strong id="lessonHeaderBest">Best 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Daily Streak</span><strong id="lessonHeaderDaily">Daily 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Accuracy</span><strong id="lessonHeaderAccuracy">Acc 100%</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Pace</span><strong id="lessonHeaderWpm">WPM 0</strong></div>
                            <div class="lesson-stats-card" role="listitem"><span class="lesson-stats-label">Last Active</span><strong id="lessonStatsLastActive">--</strong></div>
                        </div>

                        <div class="lesson-stats-session">
                            <p id="lessonStatsSessionState" class="lesson-stats-session-title">No active lesson session</p>
                            <div class="lesson-stats-session-grid" role="list">
                                <div class="lesson-stats-line" role="listitem"><span>Step</span><strong id="lessonStatsStep">--</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Progress</span><strong id="lessonStatsProgress">0/0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Session XP</span><strong id="lessonStatsSessionXp">0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Mistakes</span><strong id="lessonStatsMistakes">0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Streak</span><strong id="lessonStatsStreak">0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Typed</span><strong id="lessonStatsTyped">0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Correct</span><strong id="lessonStatsCorrect">0</strong></div>
                                <div class="lesson-stats-line" role="listitem"><span>Elapsed</span><strong id="lessonStatsElapsed">0s</strong></div>
                            </div>
                        </div>

                        <p id="lessonStatsSafety" class="lesson-stats-safety">Privacy-safe: all lesson stats stay local in your browser.</p>
                    </div>

                    <div id="lessonStatsShop" class="lesson-stats-view lesson-stats-shop" hidden aria-hidden="true">
                        <div class="lesson-shop-header">
                            <strong id="lessonShopBytes">Bytes 0</strong>
                            <span>Unlock and apply themes</span>
                        </div>
                        <ul id="lessonStatsShopList" class="lesson-shop-list" role="list"></ul>
                        <p id="lessonStatsShopHint" class="lesson-stats-safety">Buy themes using Bytes earned from lessons.</p>
                    </div>
                </div>
            </section>

            <div id="promptDialogBackdrop" class="quick-open-backdrop" aria-hidden="true"></div>
            <section
                id="promptDialog"
                class="quick-open prompt-dialog"
                data-open="false"
                aria-hidden="true"
                role="dialog"
                aria-modal="true"
                aria-labelledby="promptDialogTitle"
                aria-describedby="promptDialogMessage"
            >
                <div class="quick-open-head">
                    <p id="promptDialogTitle" class="quick-open-title">Confirm</p>
                </div>
                <p id="promptDialogMessage" class="quick-open-sub prompt-dialog-message" data-visible="false"></p>
                <div id="promptDialogList" class="prompt-dialog-list" data-open="false"></div>
                <div id="promptDialogInputWrap" class="prompt-dialog-input-wrap" data-open="false">
                    <label class="sr-only" for="promptDialogInput">Dialog input</label>
                    <input id="promptDialogInput" type="text" autocomplete="off" spellcheck="false" />
                </div>
                <p id="promptDialogError" class="prompt-dialog-error" data-visible="false"></p>
                <div class="prompt-dialog-actions" role="group" aria-label="Dialog actions">
                    <button id="promptDialogCancel" type="button">Cancel</button>
                    <button id="promptDialogConfirm" type="button" data-variant="primary">Confirm</button>
                </div>
            </section>

            <div id="layoutBackdrop" class="layout-backdrop" aria-hidden="true"></div>
            <aside id="layoutPanel" class="layout-panel" aria-hidden="true" aria-label="Layout settings">
                <header class="layout-header">
                    <div>
                        <p class="layout-title">Layout</p>
                        <p class="layout-sub">Precision controls</p>
                    </div>
                    <button id="layoutClose" type="button">Close</button>
                </header>
                <div class="layout-body">
                    <div class="layout-group">
                        <label class="layout-label" for="layoutPreset">Presets</label>
                        <select id="layoutPreset" class="layout-select">
                            <option value="">Choose a preset…</option>
                            <option value="studio">Studio (default)</option>
                            <option value="focus">Focus (zen)</option>
                            <option value="review">Review (wide console)</option>
                            <option value="wide">Wide panels</option>
                            <option value="debug">Debug (all panels)</option>
                            <option value="zen">Zen (editor only)</option>
                            <option value="sandbox">Sandbox Lab (large preview)</option>
                            <option value="diagnostics">Diagnostics (tools + console)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutOrderLog">Console position</label>
                        <select id="layoutOrderLog" class="layout-select">
                            <option value="0">1 (Left)</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4 (Right)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutRowLog">Console row</label>
                        <select id="layoutRowLog" class="layout-select">
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutOrderEditor">Editor position</label>
                        <select id="layoutOrderEditor" class="layout-select">
                            <option value="0">1 (Left)</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4 (Right)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutRowEditor">Editor row</label>
                        <select id="layoutRowEditor" class="layout-select">
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutOrderFiles">Files position</label>
                        <select id="layoutOrderFiles" class="layout-select">
                            <option value="0">1 (Left)</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4 (Right)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutRowFiles">Files row</label>
                        <select id="layoutRowFiles" class="layout-select">
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutOrderSandbox">Sandbox position</label>
                        <select id="layoutOrderSandbox" class="layout-select">
                            <option value="0">1 (Left)</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4 (Right)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutRowSandbox">Sandbox row</label>
                        <select id="layoutRowSandbox" class="layout-select">
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutOrderTools">Tools position</label>
                        <select id="layoutOrderTools" class="layout-select">
                            <option value="0">1 (Left)</option>
                            <option value="1">2</option>
                            <option value="2">3</option>
                            <option value="3">4 (Right)</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutRowTools">Tools row</label>
                        <select id="layoutRowTools" class="layout-select">
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                        </select>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutLogWidth">Console width (px)</label>
                        <div class="layout-row">
                            <input id="layoutLogWidth" type="range" min="180" max="620" step="1" />
                            <input id="layoutLogWidthInput" type="number" min="180" max="620" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutSidebarWidth">Files width (px)</label>
                        <div class="layout-row">
                            <input id="layoutSidebarWidth" type="range" min="180" max="520" step="1" />
                            <input id="layoutSidebarWidthInput" type="number" min="180" max="520" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutSandboxWidth">Sandbox width (px)</label>
                        <div class="layout-row">
                            <input id="layoutSandboxWidth" type="range" min="180" max="760" step="1" />
                            <input id="layoutSandboxWidthInput" type="number" min="180" max="760" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutToolsWidth">Tools width (px)</label>
                        <div class="layout-row">
                            <input id="layoutToolsWidth" type="range" min="180" max="760" step="1" />
                            <input id="layoutToolsWidthInput" type="number" min="180" max="760" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutPanelGap">Panel gap (px)</label>
                        <div class="layout-row">
                            <input id="layoutPanelGap" type="range" min="0" max="24" step="1" />
                            <input id="layoutPanelGapInput" type="number" min="0" max="24" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutCornerRadius">Panel corner radius (px)</label>
                        <div class="layout-row">
                            <input id="layoutCornerRadius" type="range" min="0" max="24" step="1" />
                            <input id="layoutCornerRadiusInput" type="number" min="0" max="24" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutBottomHeight">Bottom dock height (px)</label>
                        <div class="layout-row">
                            <input id="layoutBottomHeight" type="range" min="120" max="640" step="1" />
                            <input id="layoutBottomHeightInput" type="number" min="120" max="640" step="1" />
                        </div>
                    </div>

                    <div class="layout-group">
                        <label class="layout-label" for="layoutDockMagnet">Dock magnet strength (px)</label>
                        <div class="layout-row">
                            <input id="layoutDockMagnet" type="range" min="32" max="220" step="1" />
                            <input id="layoutDockMagnetInput" type="number" min="32" max="220" step="1" />
                        </div>
                    </div>

                    <div class="layout-group layout-toggles">
                        <label class="layout-toggle">
                            <input id="layoutPanelAnimation" type="checkbox" />
                            <span>Panel reflow animation</span>
                        </label>
                    </div>

                    <div class="layout-group layout-toggles">
                        <label class="layout-toggle">
                            <input id="layoutLogOpen" type="checkbox" />
                            <span>Console open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutEditorOpen" type="checkbox" />
                            <span>Editor open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutFilesOpen" type="checkbox" />
                            <span>Files open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutSandboxOpen" type="checkbox" />
                            <span>Sandbox open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutToolsOpen" type="checkbox" />
                            <span>Tools open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutHeaderOpen" type="checkbox" />
                            <span>Header open</span>
                        </label>
                        <label class="layout-toggle">
                            <input id="layoutFooterOpen" type="checkbox" />
                            <span>Footer open</span>
                        </label>
                    </div>

                    <div class="layout-actions">
                        <button id="layoutTutorial" type="button">Tutorial</button>
                        <button id="layoutReset" type="button" class="danger">Reset Layout</button>
                    </div>
                </div>
            </aside>
            <div id="quickBar" class="quick-bar" aria-hidden="true">
                <button id="quickHeader" type="button" data-panel-toggle="true">Header</button>
                <button id="quickLayout" type="button">Layout</button>
            </div>
        </body>
    </html>



